AWSTemplateFormatVersion: "2010-09-09"

Description: Template generated by rain

Resources:
  LinebotRole:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Version: "2012-10-17"
        Statement:
          - Effect: Allow
            Principal:
              Service:
                - lambda.amazonaws.com
            Action:
              - sts:AssumeRole
      ManagedPolicyArns:
        - arn:aws:iam::aws:policy/AmazonDynamoDBFullAccess
        - arn:aws:iam::aws:policy/CloudWatchLogsFullAccess
      RoleName: linebot_lambda_role 
      Tags:
        - Key: Owner
          Value: Masaya

  LinebotResponse:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket: lambda-sample-code-bucket 
        S3Key: sample_code.zip
      Environment: 
        Variables:  
          CHANGEME: CHANGEME
      FunctionName: linebot_response
      Handler: lambda_handler
      PackageType: Zip 
      Role: !GetAtt LinebotRole.Arn
      Runtime: python3.8
      Tags:
        - Key: Owner
          Value: Masaya

Outputs:
  LinebotRoleArn:
    Value: !GetAtt LinebotRole.Arn

